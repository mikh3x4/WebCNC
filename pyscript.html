<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Some plotting</title>
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
</head>

<body>
    <div id="matplotlib-lineplot"></div>
    <input type="file" id="file-upload" accept=".svg,.dxf,.hpgl" />
    <button id="process-button" py-click="process_file()">Process File</button>
    <div id="output-image"></div>

<!-- vpype-dxf==0.2.0 -->
<!-- vpype-gcode==0.13.0 -->
<!-- vpype-occult==0.4.0 -->
<!-- vpype-vectrace==0.1.2 -->
    <py-config>
        packages = ["vpype==1.13.0", "vpype-gcode"]
        [splashscreen]
            enabled = false
    </py-config>

    <py-script output="matplotlib-lineplot">
import numpy as np
print(np.__version__)
import scipy
print(scipy.__version__)
import shapely
print(shapely.__version__)
import pyodide
print("Pyodide version:", pyodide.__version__)

import vpype
print("vpype version:", vpype.__version__)

svg = """
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="297.011mm" height="209.973mm"
 viewBox="0 0 3508 2480"
 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  version="1.2" baseProfile="tiny">
<defs>
</defs>
<g fill="none" stroke="black" stroke-width="1" fill-rule="evenodd" stroke-linecap="square" stroke-linejoin="bevel" >

<g fill="#ffffff" fill-opacity="1" stroke="none" transform="matrix(1,0,0,1,0,0)"
font-family="Arial" font-size="12" font-weight="400" font-style="normal" 
>
<rect x="0" y="0" width="3508" height="2480"/>
</g>

<g fill="none" stroke="#000000" stroke-opacity="1" stroke-width="1" stroke-linecap="square" stroke-linejoin="bevel" transform="matrix(1,0,0,1,0,0)"
font-family="Arial" font-size="12" font-weight="400" font-style="normal" 
>
</g>

<g fill="#000000" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="2" transform="matrix(1,0,0,1,0,0)"
font-family="Arial" font-size="12" font-weight="400" font-style="normal" 
>
</g>

<g fill="#000000" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="2" stroke-linecap="round" stroke-linejoin="bevel" transform="matrix(1,0,0,1,0,0)"
font-family="Arial" font-size="12" font-weight="400" font-style="normal" 
>
<polyline fill="none" vector-effect="none" points="1979.84,1215.34 1881.88,1158.78 " />
</g>

<g fill="#000000" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="5" stroke-linecap="round" stroke-linejoin="bevel" transform="matrix(1,0,0,1,0,0)"
font-family="Arial" font-size="12" font-weight="400" font-style="normal" 
>
<polyline fill="none" vector-effect="none" points="2055.93,991.415 1897.12,899.722 " />
<polyline fill="none" vector-effect="none" points="1526.01,1419.13 1734.77,1539.66 " />
</g>

<g fill="#000000" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="2" stroke-linecap="round" stroke-linejoin="bevel" transform="matrix(1,0,0,1,0,0)"
font-family="Arial" font-size="12" font-weight="400" font-style="normal" 
>
<polyline fill="none" vector-effect="none" points="1689.09,1488.28 1532.73,1398.01 " />
<polyline fill="none" vector-effect="none" points="1956.71,1323.96 1813.73,1241.41 " />
<polyline fill="none" vector-effect="none" points="1928,1010.34 1845.24,962.559 " />
</g>

<g fill="#000000" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="5" stroke-linecap="round" stroke-linejoin="bevel" transform="matrix(1,0,0,1,0,0)"
font-family="Arial" font-size="12" font-weight="400" font-style="normal" 
>
<polyline fill="none" vector-effect="none" points="1784.33,1178.74 1789.91,1175.52 " />
<polyline fill="none" vector-effect="none" points="2065.12,672.758 2065.12,796.979 " />
</g>

<g fill="#000000" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="2" stroke-linecap="round" stroke-linejoin="bevel" transform="matrix(1,0,0,1,0,0)"
font-family="Arial" font-size="12" font-weight="400" font-style="normal" 
>
<polyline fill="none" vector-effect="none" points="1979.84,714.433 1771.08,593.903 " />
<polyline fill="none" vector-effect="none" points="1740.51,959.216 1531.74,838.685 " />
<polyline fill="none" vector-effect="none" points="1890.52,1395.64 1799.42,1343.05 " />
<polyline fill="none" vector-effect="none" points="1660.59,1330.15 1560.53,1272.38 " />
</g>

<g fill="#000000" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="5" stroke-linecap="round" stroke-linejoin="bevel" transform="matrix(1,0,0,1,0,0)"
font-family="Arial" font-size="12" font-weight="400" font-style="normal" 
>
<polyline fill="none" vector-effect="none" points="2065.12,672.758 1856.36,552.227 " />
<polyline fill="none" vector-effect="none" points="1771.08,593.903 1777.78,590.063 1784.3,586.388 1790.63,582.877 1796.79,579.531 1802.76,576.35 1808.55,573.334 1814.15,570.482 1819.57,567.795 1824.81,565.273 1829.87,562.915 1834.74,560.722 1839.43,558.694 1843.94,556.83 1848.26,555.131 1852.4,553.597 1856.36,552.227 " />
<polyline fill="none" vector-effect="none" points="1531.74,838.685 1536.81,829.198 1542.04,819.83 1547.42,810.58 1552.96,801.448 1558.66,792.435 1564.51,783.541 1570.51,774.765 1576.67,766.108 1582.98,757.569 1589.45,749.149 1596.08,740.848 1602.86,732.665 1609.8,724.6 1616.89,716.654 1624.13,708.827 1631.53,701.118 1639.09,693.528 1646.8,686.056 1654.67,678.703 1662.69,671.469 1670.87,664.353 1679.2,657.356 1687.69,650.477 1696.34,643.717 1705.14,637.075 1714.09,630.552 1723.2,624.147 1732.46,617.861 1741.89,611.694 1751.46,605.645 1761.19,599.714 1771.08,593.903 " />
<polyline fill="none" vector-effect="none" points="1660.59,1330.15 1660.67,1316.58 1660.9,1303.13 1661.29,1289.82 1661.84,1276.63 1662.54,1263.56 1663.4,1250.63 1664.41,1237.82 1665.58,1225.15 1666.91,1212.59 1668.39,1200.17 1670.03,1187.88 1671.83,1175.71 1673.78,1163.67 1675.89,1151.76 1678.15,1139.98 1680.57,1128.32 1683.14,1116.79 1685.87,1105.39 1688.76,1094.12 1691.81,1082.98 1695.01,1071.96 1698.36,1061.07 1701.87,1050.31 1705.54,1039.68 1709.37,1029.17 1713.35,1018.8 1717.48,1008.55 1721.78,998.424 1726.22,988.43 1730.83,978.564 1735.59,968.826 1740.51,959.216 " />
<polyline fill="none" vector-effect="none" points="1770.12,1551.64 1766.86,1551.13 1763.65,1550.53 1760.48,1549.83 1757.36,1549.03 1754.29,1548.14 1751.26,1547.16 1748.28,1546.08 1745.35,1544.91 1742.47,1543.64 1739.63,1542.27 1736.84,1540.82 1734.1,1539.26 1731.4,1537.61 1728.75,1535.87 1726.15,1534.03 1723.59,1532.1 1721.08,1530.07 1718.62,1527.95 1716.21,1525.74 1713.84,1523.42 1711.52,1521.02 1709.24,1518.52 1707.02,1515.92 1704.84,1513.23 1702.7,1510.44 1700.62,1507.56 1698.58,1504.59 1696.59,1501.51 1694.64,1498.35 1692.74,1495.09 1690.89,1491.73 1689.09,1488.28 " />
<polyline fill="none" vector-effect="none" points="1893.17,1518.33 1888.78,1520.83 1884.42,1523.23 1880.1,1525.54 1875.82,1527.76 1871.57,1529.88 1867.36,1531.91 1863.18,1533.84 1859.03,1535.68 1854.92,1537.43 1850.85,1539.08 1846.81,1540.64 1842.81,1542.1 1838.84,1543.47 1834.91,1544.75 1831.01,1545.93 1827.15,1547.02 1823.32,1548.01 1819.53,1548.91 1815.77,1549.72 1812.05,1550.43 1808.36,1551.05 1804.71,1551.57 1801.09,1552 1797.51,1552.34 1793.96,1552.58 1790.45,1552.73 1786.97,1552.78 1783.53,1552.74 1780.13,1552.61 1776.76,1552.38 1773.42,1552.06 1770.12,1551.64 " />
<polyline fill="none" vector-effect="none" points="2052.51,1357.63 2048.88,1363.95 2045.15,1370.19 2041.35,1376.35 2037.45,1382.43 2033.47,1388.42 2029.4,1394.32 2025.24,1400.14 2021,1405.88 2016.67,1411.53 2012.25,1417.1 2007.75,1422.59 2003.16,1427.99 1998.48,1433.31 1993.72,1438.54 1988.87,1443.69 1983.94,1448.75 1978.91,1453.73 1973.8,1458.63 1968.61,1463.44 1963.32,1468.17 1957.95,1472.81 1952.5,1477.37 1946.95,1481.84 1941.32,1486.24 1935.61,1490.54 1929.8,1494.76 1923.91,1498.9 1917.94,1502.96 1911.88,1506.93 1905.73,1510.81 1899.49,1514.62 1893.17,1518.33 " />
<polyline fill="none" vector-effect="none" points="1893.17,1149.69 1888.09,1152.74 1883.11,1155.98 1878.22,1159.4 1873.43,1163 1868.73,1166.79 1864.12,1170.77 1859.61,1174.93 1855.19,1179.28 1850.87,1183.81 1846.64,1188.53 1842.5,1193.43 1838.45,1198.52 1834.5,1203.8 1830.64,1209.26 1826.88,1214.9 1823.21,1220.73 " />
<polyline fill="none" vector-effect="none" points="1823.21,1220.73 1819.7,1226.63 1816.42,1232.48 1813.36,1238.27 1810.53,1244.01 1807.93,1249.7 1805.55,1255.33 1803.4,1260.92 1801.47,1266.45 1799.77,1271.93 1798.3,1277.36 1797.06,1282.73 1796.04,1288.06 1795.25,1293.33 1794.68,1298.55 1794.34,1303.72 1794.23,1308.83 " />
<polyline fill="none" vector-effect="none" points="1979.84,714.433 1986.54,710.593 1993.06,706.918 1999.4,703.408 2005.55,700.062 2011.52,696.881 2017.31,693.864 2022.91,691.013 2028.34,688.326 2033.57,685.803 2038.63,683.446 2043.5,681.253 2048.19,679.224 2052.7,677.361 2057.03,675.662 2061.17,674.127 2065.12,672.758 " />
<polyline fill="none" vector-effect="none" points="1988.48,831.092 1979.92,836.127 1971.57,841.236 1963.41,846.418 1955.45,851.673 1947.69,857.002 1940.12,862.405 1932.76,867.881 1925.6,873.431 1918.64,879.055 1911.87,884.751 1905.31,890.522 1898.94,896.366 1892.77,902.283 1886.81,908.274 1881.04,914.339 1875.47,920.477 " />
<polyline fill="none" vector-effect="none" points="1958.24,1143.01 1956.87,1141.9 1955.46,1140.88 1954,1139.94 1952.5,1139.09 1950.96,1138.32 1949.37,1137.64 1947.75,1137.04 1946.08,1136.52 1944.36,1136.09 1942.61,1135.75 1940.81,1135.49 1938.97,1135.32 1937.08,1135.23 1935.16,1135.22 1933.19,1135.31 1931.17,1135.47 1929.12,1135.72 1927.02,1136.06 1924.88,1136.48 1922.7,1136.99 1920.47,1137.58 1918.2,1138.25 1915.89,1139.01 1913.54,1139.86 1911.14,1140.79 1908.7,1141.81 1906.22,1142.91 1903.69,1144.1 1901.13,1145.37 1898.51,1146.72 1895.86,1148.17 1893.17,1149.69 " />
<polyline fill="none" vector-effect="none" points="1956.71,1323.96 1959.51,1318.04 1962.13,1312.02 1964.57,1305.87 1966.83,1299.61 1968.91,1293.23 1970.81,1286.73 1972.52,1280.12 1974.06,1273.39 1975.41,1266.54 1976.59,1259.58 1977.58,1252.5 1978.4,1245.3 1979.03,1237.99 1979.48,1230.56 1979.75,1223.01 1979.84,1215.34 " />
<polyline fill="none" vector-effect="none" points="1451.97,1191.33 1452.16,1181.54 1452.44,1171.81 1452.8,1162.16 1453.25,1152.57 " />
<polyline fill="none" vector-effect="none" points="1499.88,910.59 1503.42,901.241 1507.09,891.995 1510.88,882.852 1514.8,873.812 1518.85,864.876 1523.02,856.043 1527.32,847.312 1531.74,838.685 " />
<polyline fill="none" vector-effect="none" points="1979.84,1215.34 1979.76,1208.74 1979.5,1202.42 1979.08,1196.38 1978.49,1190.61 1977.73,1185.12 1976.8,1179.9 1975.71,1174.97 1974.44,1170.31 1973.01,1165.93 1971.4,1161.82 1969.63,1157.99 1967.69,1154.44 1965.58,1151.17 1963.3,1148.17 1960.86,1145.46 1958.24,1143.01 " />
<polyline fill="none" vector-effect="none" points="1821.47,1394.23 1823.19,1395.78 1824.93,1397.23 1826.71,1398.59 1828.51,1399.84 1830.34,1401 1832.2,1402.07 1834.09,1403.03 1836,1403.9 1837.95,1404.67 1839.92,1405.35 1841.92,1405.92 1843.95,1406.4 1846.01,1406.79 1848.09,1407.08 1850.21,1407.26 1852.35,1407.36 1854.53,1407.35 1856.73,1407.25 1858.95,1407.05 1861.21,1406.76 1863.5,1406.36 1865.81,1405.87 1868.15,1405.29 1870.53,1404.6 1872.92,1403.82 1875.35,1402.95 1877.81,1401.97 1880.29,1400.9 1882.81,1399.73 1885.35,1398.46 1887.92,1397.1 1890.52,1395.64 " />
<polyline fill="none" vector-effect="none" points="1794.23,1308.83 1794.25,1312.54 1794.33,1316.18 1794.47,1319.75 1794.65,1323.26 1794.89,1326.7 1795.18,1330.07 1795.53,1333.38 1795.93,1336.62 1796.38,1339.79 1796.89,1342.89 1797.45,1345.93 1798.06,1348.9 1798.72,1351.8 1799.44,1354.64 1800.21,1357.41 1801.04,1360.11 1801.91,1362.75 1802.85,1365.31 1803.83,1367.82 1804.87,1370.25 1805.96,1372.62 1807.1,1374.92 1808.3,1377.15 1809.55,1379.32 1810.85,1381.42 1812.21,1383.45 1813.62,1385.41 1815.08,1387.31 1816.6,1389.14 1818.17,1390.91 1819.79,1392.6 1821.47,1394.23 " />
<polyline fill="none" vector-effect="none" points="1809.97,1029.73 1807.33,1037.33 1804.82,1045.16 1802.45,1053.21 1800.22,1061.49 1798.13,1070.01 1796.18,1078.75 1794.37,1087.72 1792.69,1096.91 1791.16,1106.34 1789.77,1116 1788.51,1125.88 1787.4,1135.99 1786.42,1146.34 1785.59,1156.91 1784.89,1167.71 1784.33,1178.74 " />
<polyline fill="none" vector-effect="none" points="1928,1010.34 1933.3,1007.35 1938.52,1004.51 1943.67,1001.84 1948.75,999.335 1953.75,996.989 1958.69,994.805 1963.55,992.784 1968.34,990.925 1973.05,989.229 1977.7,987.695 1982.27,986.323 1986.77,985.115 1991.2,984.068 1995.56,983.184 1999.84,982.463 2004.05,981.904 2008.19,981.507 2012.26,981.273 2016.26,981.202 2020.18,981.293 2024.03,981.546 2027.81,981.962 2031.52,982.541 2035.16,983.282 2038.72,984.185 2042.21,985.251 2045.63,986.479 2048.98,987.87 2052.25,989.423 2055.45,991.139 2058.58,993.017 2061.64,995.058 " />
<polyline fill="none" vector-effect="none" points="2110,1138.11 2109.94,1145.44 2109.77,1152.75 2109.49,1160.02 2109.1,1167.27 2108.59,1174.48 2107.98,1181.66 2107.25,1188.81 2106.4,1195.94 2105.45,1203.03 2104.38,1210.09 2103.2,1217.11 2101.91,1224.11 2100.51,1231.08 2098.99,1238.02 2097.37,1244.92 2095.63,1251.8 2093.77,1258.64 2091.81,1265.46 2089.73,1272.24 2087.54,1278.99 2085.24,1285.71 2082.83,1292.41 2080.3,1299.07 2077.66,1305.7 2074.91,1312.29 2072.05,1318.86 2069.07,1325.4 2065.99,1331.91 2062.79,1338.38 2059.47,1344.83 2056.05,1351.24 2052.51,1357.63 " />
<polyline fill="none" vector-effect="none" points="2061.64,995.058 2064.62,997.254 2067.5,999.596 2070.28,1002.08 2072.97,1004.72 2075.57,1007.5 2078.07,1010.43 2080.48,1013.51 2082.8,1016.73 2085.02,1020.1 2087.14,1023.62 2089.17,1027.28 2091.11,1031.09 2092.95,1035.05 2094.7,1039.15 2096.35,1043.4 2097.91,1047.8 2099.37,1052.34 2100.74,1057.03 2102.02,1061.87 2103.2,1066.85 2104.28,1071.98 2105.27,1077.26 2106.17,1082.68 2106.97,1088.25 2107.68,1093.97 2108.3,1099.84 2108.82,1105.85 2109.24,1112.01 2109.57,1118.31 2109.81,1124.76 2109.95,1131.36 2110,1138.11 " />
<polyline fill="none" vector-effect="none" points="1890.52,1395.64 1895.82,1392.45 1900.97,1389.08 1905.96,1385.55 1910.8,1381.84 1915.48,1377.96 1920.01,1373.91 1924.38,1369.68 1928.6,1365.29 1932.65,1360.72 1936.56,1355.99 1940.31,1351.08 1943.9,1346 1947.33,1340.74 1950.62,1335.32 1953.74,1329.72 1956.71,1323.96 " />
<polyline fill="none" vector-effect="none" points="1689.09,1488.28 1687.33,1484.74 1685.63,1481.11 1683.99,1477.39 1682.41,1473.57 1680.88,1469.67 1679.4,1465.68 1677.98,1461.59 1676.62,1457.42 1675.31,1453.15 1674.06,1448.8 1672.86,1444.35 1671.72,1439.82 1670.63,1435.19 1669.61,1430.48 1668.63,1425.67 1667.71,1420.77 1666.85,1415.79 1666.04,1410.71 1665.29,1405.54 1664.6,1400.28 1663.96,1394.94 1663.37,1389.5 1662.84,1383.97 1662.37,1378.35 1661.95,1372.64 1661.59,1366.84 1661.28,1360.95 1661.03,1354.97 1660.84,1348.9 1660.7,1342.74 1660.62,1336.49 1660.59,1330.15 " />
<polyline fill="none" vector-effect="none" points="1740.51,959.216 1745.58,949.729 1750.81,940.36 1756.19,931.11 1761.73,921.979 1767.42,912.966 1773.27,904.071 1779.27,895.296 1785.43,886.638 1791.75,878.1 1798.22,869.68 1804.84,861.378 1811.62,853.195 1818.56,845.131 1825.65,837.185 1832.9,829.357 1840.3,821.649 1847.86,814.059 1855.57,806.587 1863.44,799.234 1871.46,791.999 1879.64,784.883 1887.97,777.886 1896.46,771.007 1905.1,764.247 1913.9,757.605 1922.86,751.082 1931.96,744.678 1941.23,738.392 1950.65,732.224 1960.23,726.175 1969.96,720.245 1979.84,714.433 " />
<polyline fill="none" vector-effect="none" points="1526.12,1419.19 1522.72,1417.14 1519.4,1414.94 1516.15,1412.59 1512.98,1410.09 " />
<polyline fill="none" vector-effect="none" points="2065.12,796.979 2055.45,800.187 2045.81,803.697 2036.19,807.509 2026.59,811.622 2017.03,816.037 2007.49,820.754 1997.97,825.772 1988.48,831.092 " />
<polyline fill="none" vector-effect="none" points="1875.47,920.477 1870.08,926.693 1864.87,932.99 1859.83,939.369 1854.97,945.83 1850.27,952.373 1845.75,958.997 1841.4,965.703 1837.22,972.491 1833.21,979.36 1829.37,986.311 1825.71,993.344 1822.22,1000.46 1818.9,1007.65 1815.75,1014.93 1812.78,1022.29 1809.97,1029.73 " />
<polyline fill="none" vector-effect="none" points="1789.91,1175.52 1792.66,1168.67 1795.51,1161.94 1798.46,1155.31 1801.51,1148.79 1804.67,1142.38 1807.92,1136.08 1811.28,1129.89 1814.74,1123.8 1818.3,1117.82 1821.95,1111.96 1825.71,1106.2 1829.58,1100.55 1833.54,1095.01 1837.6,1089.57 1841.76,1084.25 1846.03,1079.03 1850.4,1073.93 1854.86,1068.93 1859.43,1064.04 1864.1,1059.25 1868.87,1054.58 1873.74,1050.02 1878.71,1045.56 1883.79,1041.21 1888.96,1036.98 1894.23,1032.85 1899.61,1028.82 1905.09,1024.91 1910.66,1021.11 1916.34,1017.41 1922.12,1013.82 1928,1010.34 " />
<polyline fill="none" vector-effect="none" points="1576.56,1562.26 1412.4,1467.49 " />
<polyline fill="none" vector-effect="none" points="1560.53,1254.2 1420.76,1173.51 " />
<polyline fill="none" vector-effect="none" points="1344.96,1378.67 1560.53,1254.2 " />
<polyline fill="none" vector-effect="none" points="1344.96,1695.98 1576.56,1562.26 " />
<polyline fill="none" vector-effect="none" points="1209.93,1902.66 1209.93,1167.47 " />
<polyline fill="none" vector-effect="none" points="1209.93,1902.66 1001.16,1782.13 " />
<polyline fill="none" vector-effect="none" points="1001.16,1782.13 1001.16,1704.92 " />
<polyline fill="none" vector-effect="none" points="1001.16,1507.95 1001.16,1415.76 " />
<polyline fill="none" vector-effect="none" points="1001.16,1200.29 1001.16,1046.94 " />
<polyline fill="none" vector-effect="none" points="1209.93,1167.47 1001.16,1046.94 " />
<polyline fill="none" vector-effect="none" points="1576.56,955.796 1367.79,835.266 " />
<polyline fill="none" vector-effect="none" points="1001.16,1046.94 1367.79,835.266 " />
<polyline fill="none" vector-effect="none" points="1576.56,1083.56 1344.96,1217.27 " />
<polyline fill="none" vector-effect="none" points="1576.56,1690.99 1209.93,1902.66 " />
<polyline fill="none" vector-effect="none" points="1576.56,955.796 1576.56,1083.56 " />
<polyline fill="none" vector-effect="none" points="1344.96,1217.27 1344.96,1378.67 " />
<polyline fill="none" vector-effect="none" points="1560.53,1254.2 1560.53,1381.96 " />
<polyline fill="none" vector-effect="none" points="1209.93,1167.47 1576.56,955.796 " />
<polyline fill="none" vector-effect="none" points="1576.56,1562.26 1576.56,1690.99 " />
<polyline fill="none" vector-effect="none" points="1560.53,1381.96 1344.96,1506.43 " />
<polyline fill="none" vector-effect="none" points="1344.96,1506.43 1344.96,1695.98 " />
<polyline fill="none" vector-effect="none" points="2633.4,807.76 2556.76,763.51 " />
</g>

<g fill="#000000" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="2" stroke-linecap="round" stroke-linejoin="bevel" transform="matrix(1,0,0,1,0,0)"
font-family="Arial" font-size="12" font-weight="400" font-style="normal" 
>
<polyline fill="none" vector-effect="none" points="2425.21,803.255 2375.99,774.838 " />
<polyline fill="none" vector-effect="none" points="2427.44,711.456 2407.29,699.821 " />
</g>

<g fill="#000000" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="5" stroke-linecap="round" stroke-linejoin="bevel" transform="matrix(1,0,0,1,0,0)"
font-family="Arial" font-size="12" font-weight="400" font-style="normal" 
>
<polyline fill="none" vector-effect="none" points="2425.21,927.959 2332.97,874.708 " />
<polyline fill="none" vector-effect="none" points="2153.47,1205.53 2104.44,1177.22 " />
<polyline fill="none" vector-effect="none" points="2223.97,340.954 2347.99,269.349 " />
<polyline fill="none" vector-effect="none" points="2556.76,389.88 2347.99,269.349 " />
<polyline fill="none" vector-effect="none" points="1962.11,937.245 2014.7,817.491 " />
<polyline fill="none" vector-effect="none" points="2065.12,702.662 2223.97,340.954 " />
<polyline fill="none" vector-effect="none" points="2153.47,1097.4 2101.89,1067.62 " />
<polyline fill="none" vector-effect="none" points="2633.4,807.76 2633.4,928.442 " />
<polyline fill="none" vector-effect="none" points="2432.73,461.484 2556.76,389.88 " />
<polyline fill="none" vector-effect="none" points="2153.47,1097.4 2432.73,461.484 " />
<polyline fill="none" vector-effect="none" points="2425.21,1201.02 2293.24,1124.83 " />
<polyline fill="none" vector-effect="none" points="2153.47,1205.53 2153.47,1097.4 " />
<polyline fill="none" vector-effect="none" points="2425.21,1048.64 2153.47,1205.53 " />
<polyline fill="none" vector-effect="none" points="2633.4,928.442 2556.76,972.692 " />
<polyline fill="none" vector-effect="none" points="2556.76,852.01 2633.4,807.76 " />
<polyline fill="none" vector-effect="none" points="2425.21,1201.02 2425.21,1048.64 " />
<polyline fill="none" vector-effect="none" points="2556.76,972.692 2556.76,1125.07 " />
<polyline fill="none" vector-effect="none" points="2425.21,927.959 2425.21,803.255 " />
<polyline fill="none" vector-effect="none" points="2432.73,461.484 2223.97,340.954 " />
<polyline fill="none" vector-effect="none" points="2271.92,1016.46 2425.21,927.959 " />
<polyline fill="none" vector-effect="none" points="2556.76,1125.07 2425.21,1201.02 " />
<polyline fill="none" vector-effect="none" points="2388.7,745.328 2271.92,1016.46 " />
<polyline fill="none" vector-effect="none" points="2556.76,389.88 2556.76,852.01 " />
<polyline fill="none" vector-effect="none" points="2430.92,640.495 2427.44,642.507 " />
<polyline fill="none" vector-effect="none" points="2427.44,642.507 2423.3,655.201 2418.95,667.94 2414.41,680.725 2409.67,693.555 2404.73,706.43 2399.59,719.351 2394.24,732.317 2388.7,745.328 " />
<polyline fill="none" vector-effect="none" points="2427.44,711.456 2427.58,707.719 2427.71,704.08 2427.85,700.538 2427.98,697.095 2428.11,693.75 2428.24,690.503 2428.37,687.354 2428.49,684.303 2428.61,681.35 2428.74,678.495 2428.86,675.738 2428.97,673.08 2429.09,670.519 2429.2,668.056 2429.31,665.692 2429.42,663.425 2429.53,661.256 2429.64,659.186 2429.74,657.214 2429.84,655.339 2429.94,653.563 2430.04,651.885 2430.14,650.305 2430.23,648.822 2430.33,647.438 2430.42,646.152 2430.51,644.964 2430.59,643.875 2430.68,642.883 2430.76,641.989 2430.84,641.193 2430.92,640.495 " />
<polyline fill="none" vector-effect="none" points="2425.21,803.255 2425.22,799.238 2425.24,794.992 2425.29,790.516 2425.35,785.811 2425.43,780.877 2425.52,775.713 2425.64,770.32 2425.77,764.697 2425.91,758.845 2426.08,752.763 2426.26,746.452 2426.46,739.912 2426.68,733.142 2426.92,726.143 2427.17,718.914 2427.44,711.456 " />
<polyline fill="none" vector-effect="none" points="1077.12,1850.61 912.969,1755.84 " />
<polyline fill="none" vector-effect="none" points="1061.1,1542.55 921.33,1461.85 " />
<polyline fill="none" vector-effect="none" points="845.523,1984.33 1077.12,1850.61 " />
<polyline fill="none" vector-effect="none" points="845.523,1794.78 845.523,1984.33 " />
<polyline fill="none" vector-effect="none" points="1061.1,1670.31 845.523,1794.78 " />
<polyline fill="none" vector-effect="none" points="1077.12,1979.34 710.492,2191.01 " />
<polyline fill="none" vector-effect="none" points="1061.1,1542.55 1061.1,1670.31 " />
<polyline fill="none" vector-effect="none" points="845.523,1667.01 1061.1,1542.55 " />
<polyline fill="none" vector-effect="none" points="845.523,1505.62 845.523,1667.01 " />
<polyline fill="none" vector-effect="none" points="1077.12,1850.61 1077.12,1979.34 " />
<polyline fill="none" vector-effect="none" points="1077.12,1371.91 845.523,1505.62 " />
<polyline fill="none" vector-effect="none" points="501.727,1335.29 868.36,1123.61 " />
<polyline fill="none" vector-effect="none" points="710.492,1455.82 1077.12,1244.15 " />
<polyline fill="none" vector-effect="none" points="1077.12,1244.15 1077.12,1371.91 " />
<polyline fill="none" vector-effect="none" points="1077.12,1244.15 868.36,1123.61 " />
<polyline fill="none" vector-effect="none" points="501.727,2070.48 501.727,1335.29 " />
<polyline fill="none" vector-effect="none" points="710.492,2191.01 501.727,2070.48 " />
<polyline fill="none" vector-effect="none" points="710.492,2191.01 710.492,1455.82 " />
<polyline fill="none" vector-effect="none" points="710.492,1455.82 501.727,1335.29 " />
</g>

<g fill="none" stroke="#000000" stroke-opacity="1" stroke-width="1" stroke-linecap="square" stroke-linejoin="bevel" transform="matrix(1,0,0,1,0,0)"
font-family="Arial" font-size="12" font-weight="400" font-style="normal" 
>
</g>
</g>
</svg>
"""

with open("input.svg", "w") as f:
    f.write(svg)

config='''
[gwrite.my_own_plotter]
unit = "mm"
document_start = "G90\n;G10 P0 L20 X0 Y0 Z0;\n"
layer_start = ""
line_start = ""
# segment_first = """G0 X{x:.4f} Y{y:.4f};
# M10 P0 S100;\nG04 P500;\n"""
segment_first = """G0 X{x:.4f} Y{y:.4f};
M10 P0 S100;\n"""
segment = """G01 X{x:.4f} Y{y:.4f} F1000\n"""
# line_end = """M10 P0 S30;\nG04 P500;\n"""
line_end = """M10 P0 S30;\n"""
document_end = "M10 P0 S30\nG0 X0 Y0"
invert_y = true
'''

with open("config.toml", "w") as f:
    f.write(config)


def process_file():
    file_input = Element("file-upload")
    uploaded_file = file_input.element.files.item(0)
    return
    if uploaded_file is not None:
        file_name = uploaded_file.name
        #array_buffer = await uploaded_file.arrayBuffer()
        file_data = bytes(array_buffer)
        with open(file_name, "wb") as f:
            f.write(file_data)
        vpype_output = vpype.read_multilayer_svg(file_name).scale(0.5).write_svg("output.svg")
        
        output_div = Element("output-image")
    else:
        print("No file selected.")
    </py-script>

    <py-repl id="my-repl" auto-generate="true"> </py-repl>

</body>

</html>
